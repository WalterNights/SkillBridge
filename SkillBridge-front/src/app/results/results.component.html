<div class="min-h-screen flex flex-col items-center p-6 mt-16 bg-gray-10 dark:bg-darkBg">

    <!-- DEBUGGING BUTTON -->
    <div (click)="obtainOffers()"
        class="fixed top-15 left-0 p-5 font-bold bg-white rounded-r-full shadow-md cursor-pointer">
        <span class="absolute -top-2 left-36 rounded-full text-sm bg-green-300 p-1">DEBUG</span>
        <p>OBTENER OFERTAS</p>
    </div>
    <!-- DEBUGGING BUTTON -->

    <h1 class="text-3xl font-bold mb-6 text-center dark:text-darkText">
        Vacantes para ti
    </h1>
    <!-- FILTER SECTION -->
    <div class="grid place-items-center md:w-3/4 2xl:w-2/3 h-40 rounded-xl bg-gray-50">
        <h2>Bucar Vacante</h2>
        <input type="text" class="w-3/4 mt-1 px-4 py-2 dark:bg-darkBgTa border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
    </div>
    <div class="flex gap-6 md:w-3/4 2xl:w-2/3 h-8 border-b my-5">
        <button (click)="setFilter('all')" class="text-xl hover:border-b border-blue-300 cursor-pointer">Todo</button>
        <button (click)="setFilter('good')" class="text-xl hover:border-b border-blue-300 cursor-pointer">Bueno</button>
        <button (click)="setFilter('regular')" class="text-xl hover:border-b border-blue-300 cursor-pointer">Regular</button>
        <button (click)="setFilter('bad')" class="text-xl hover:border-b border-blue-300 cursor-pointer">Malo</button>
    </div>
    <!-- FILTER SECTION -->
    <div 
        class="grid gap-6 place-items-center md:w-3/4 2xl:w-2/3 md:grid-cols-2 lg:grid-cols-3 mt-10"
        [ngClass]="{'md:grid-cols-2 lg:grid-cols-3': offers.length > 0}"
    >
        <div 
            *ngFor="let offer of filteredOffer" 
            (click)="goToDetail(offer)" 
            (mouseenter)="onHover(true, offer.id)"
            (mouseleave)="onHover(false, offer.id)" 
            class="
                w-10/12 h-[300px] rounded-xl grid place-items-center
                shadow-md overflow-hidden relative
                hover:shadow-lg hover:scale-105 transition-all cursor-pointer
            " [ngClass]="{
                'shadow-green-300': offer.match_percentage === 100,
                'shadow-blue-300': offer.match_percentage >= 70 && offer.match_percentage < 100,
                'shadow-orange-300': offer.match_percentage >= 50 && offer.match_percentage < 70,
            }"
        >
            <span 
                aria-hidden="true"
                [ngStyle]="{'background-image': setGradient(offer.match_percentage, isHovered(offer.id))}" 
                class="
                    content[''] duration-5000 absolute left-2/4 top-2/4 block 
                    w-[calc(100%*1.5)] -translate-x-2/4 -translate-y-2/4 
                    animate-gradient-spin rounded-full bg-conic-gradient pb-[calc(100%*1.5)]
                "
            ></span>
            <div class="grid w-[99.5%] h-[99.5%] rounded-xl dark:text-darkText z-40">
                <div class="text-sm text-gray-500 pt-5">
                    <p class="px-5">
                        <i>{{ offer.location }}</i>
                    </p>
                    <div class="border-b pt-3"></div>
                </div>
                <h2 
                    #jobTitle 
                    class="text-lg font-extrabold font-mono text-indigo-800 dark:text-indigo-200 px-5"
                >
                    {{ offer.title.length > 40 ? (offer.title| slice:0:40) + '...' : offer.title }}
                </h2>
                <div class="flex items-center bg-gray-50 dark:bg-darkBg px-5">
                    <p class="text-xs text-gray-600 font-bold font-mono">
                        <i>{{ offer.company }}</i>
                    </p>
                </div>
                <div 
                    class="flex justify-center items-center w-full h-10 rounded-b-xl mt-auto"
                    [ngStyle]="{'background-color': setColor(offer.match_percentage)}">
                    <p class="text-black text-sm font-bold opacity-50"
                >
                        Compatibilidad: {{ offer.match_percentage }}%
                    </p>
                </div>
            </div>
            <!--BACKGROUND HOVER EFFECTS-->
            <!--from right to lefth effect-->
            <div 
                [ngStyle]="{'width': setWidth(isHovered(offer.id))}"
                class="absolute top-[0.5px] right-[0.5px] w-0 h-[18%] rounded-t-xl bg-blue-100 transitionWidth z-30"
            ></div>
            <!--from left to right effect-->
            <div 
                [ngStyle]="{'width': setWidth(isHovered(offer.id))}"
                class="absolute left-[0.5px] w-0 h-[99.5%] rounded-xl bg-gray-50 transitionWidth z-20"
            ></div>
            <!--static background-->
            <div class="absolute w-[99.5%] h-[99.5%] rounded-xl bg-white dark:bg-darkCard z-10"></div>
            <!--BACKGROUND HOVER EFFECTS-->
        </div>
        <div *ngIf="offers.length === 0" class="text-center text-gray-500">
            No se encontraron vacantes por ahora. Intenta actualizar tu perfil o volver m√°s tarde.
        </div>
    </div>
</div>